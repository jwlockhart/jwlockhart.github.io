
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="/theme/pygments/perldoc.min.css">
  <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/font-awesome.min.css">




    <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">



<meta name="author" content="Jeffrey W. Lockhart" />
<meta name="description" content="Parallelism is rarely taught outside advanced computer science courses, yet we hear mention of it often in computational social science. Beginner and intermediate skill people get contradictory messages: &#34;parallelism is good,&#34; but also &#34;parallelism is hard.&#34; Both are right... sometimes. In this post, I give a sense of what parallelism …" />
<meta name="keywords" content="CSS, advice, parallelism">

<meta property="og:site_name" content="Jeff Lockhart's Site"/>
<meta property="og:title" content="When should I use parallelism?"/>
<meta property="og:description" content="Parallelism is rarely taught outside advanced computer science courses, yet we hear mention of it often in computational social science. Beginner and intermediate skill people get contradictory messages: &#34;parallelism is good,&#34; but also &#34;parallelism is hard.&#34; Both are right... sometimes. In this post, I give a sense of what parallelism …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="/intro-parallelism.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2019-02-18 16:06:00-05:00"/>
<meta property="article:modified_time" content="2019-02-18 16:06:00-05:00"/>
<meta property="article:author" content="/author/jeffrey-w-lockhart.html">
<meta property="article:section" content="heuristics"/>
<meta property="article:tag" content="CSS"/>
<meta property="article:tag" content="advice"/>
<meta property="article:tag" content="parallelism"/>
<meta property="og:image" content="/images/face.jpg">

  <title>Jeff Lockhart's Site &ndash; When should I use parallelism?</title>

</head>
<body>
  <aside>
    <div>
      <a href="">
        <img src="/images/face.jpg" alt="Jeff Lockhart" title="Jeff Lockhart">
      </a>
      <h1><a href="">Jeff Lockhart</a></h1>


      <nav>
        <ul class="list">
          <li><a href="/pages/about.html#about">About me</a></li>
          <li><a href="/pages/projects.html#projects">Current projects</a></li>

          <li><a href="/cv.pdf" target="_blank">CV</a></li>
          <li><a href="/" target="_blank">blog</a></li>
        </ul>
      </nav>

      <ul class="social">
        <li><a class="sc-twitter" href="https://twitter.com/jw_lockhart" target="_blank"><i class="fa fa-twitter"></i></a></li>
        <li><a class="sc-github" href="https://github.com/jwlockhart" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-google" href="https://scholar.google.com/citations?user=ptcuwrcAAAAJ" target="_blank"><i class="fa fa-google"></i></a></li>
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href="">    Home
</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>


    </nav>

<article class="single">
  <header>
      
    <h1 id="intro-parallelism">When should I use parallelism?</h1>
    <p>
          Posted on Mon 18 February 2019 in <a href="/category/heuristics.html">heuristics</a>


    </p>
  </header>


  <div>
    <p>Parallelism is rarely taught outside advanced computer science courses, yet we hear mention of it often in computational social science. Beginner and intermediate skill people get contradictory messages: "parallelism is good," but also "parallelism is hard." Both are right... <em>sometimes</em>. In this post, I give a sense of what parallelism is, when one might want to use it for CSS, and point to easy ways of using it. Consider this an "overview of parallelism for beginners." I'll write more about my work with advanced tools (spark, multiprocessing, threads...) in future posts.</p>
<h2>What is parallelism?</h2>
<p>Most code is "serial": it does a series of things, one after another. "Parallel" code does multiple things simultaneously -- it is multitasking for your computer. Modern computers have multiple processing cores<sup id=sf-intro-parallelism-1-back><a href=#sf-intro-parallelism-1 class=simple-footnote title="Processors, cores, and logical-cores are all different things, but the distinctions are not important to this introduction.">1</a></sup>, meaning they can literally multitask. Even laptops these days typically come with 2, 4, or more cores. If you need to process a lot of data, having two processors work on it at once can make the work go twice as fast!<sup id=sf-intro-parallelism-2-back><a href=#sf-intro-parallelism-2 class=simple-footnote title="Well, not quite, but that's for later.">2</a></sup> </p>
<h2>Should I use parallelism for my task?</h2>
<p>It depends on two main things:</p>
<ol>
<li>How long does your task take? <ul>
<li>The goal of parallelism is saving <em>you</em> time, so if writing parallel code takes more of your time than waiting for your serial code to run, don't bother. </li>
<li>Some tasks are really big, or time sensitive, and the only way to get them done fast enough is to do them in parallel. Supercomputers are an extreme case of this, but there are plenty of cases in CSS that don't need supercomputers. </li>
</ul>
</li>
<li>Is there an easy parallel solution?<ul>
<li>If so, you should probably use it.</li>
<li>If not, you might get bogged down in the technical details of building a custom solution. For most CSS people and problems, this is outside our wheelhouse. Put differently, traveling in airplanes is nice, but inventing them is probably not worth it for most travelers.</li>
</ul>
</li>
</ol>
<h2>Common CSS tasks with easy parallel solutions</h2>
<ul>
<li>Anything with parallelism built into the tools you're already using. <ul>
<li>In R, this is often enabled by default and the functions with built-in parallelism will simply use it.</li>
<li>In python, built-in parallelism usually has to be turned on. For example, many functions in the <code>scikit-learn</code> package accept the argument <code>n_jobs</code> to tell them how many cores to use. <strong>Bonus</strong>: setting <code>n_jobs=-1</code> tells the computer to use all available processors.</li>
</ul>
</li>
<li>Any time you want to do the same thing to many files / URLs / etc. ("data parallelism").<ul>
<li>The key here is that each chunk of data (file, URL, etc.) is independent of the others. What I do to one piece of data does not depend on what is in the other data.</li>
<li>An easy tool for doing this on the command line is <a href="https://www.gnu.org/software/parallel/">GNU Parallel</a>. For example, I needed to compress many files recently and used the command <code>$ parallel gzip ::: *.json</code>.<sup id=sf-intro-parallelism-3-back><a href=#sf-intro-parallelism-3 class=simple-footnote title="Compression is often limited by disk speed instead of processor speed, but this is an simple example.">3</a></sup></li>
<li>If you have access to a computing cluster, you can also submit jobs to the cluster's work queue and they will execute in parallel. A job in this case would just be "do X to file Y." If there are a thousand files, then there are a thousand jobs. The cluster will manage them for you and tell you when they're done. Unfortunately, every cluster is a little different, so you'll have to refer to the user guide for yours for details.</li>
</ul>
</li>
<li>If you want to try a model or simulation over and over (perhaps with different parameters).<ul>
<li>In machine learning, this is a common step called a "grid search" or "parameter sweep." </li>
<li>In simulations (e.g. agent based models), simulating many independent worlds is common.</li>
<li>The key here is that each model or simulation is independent of the others: the results of one do not depend on the results of the others. If this is true, then you can do them in parallel.</li>
<li>The simplest tools for this are the same as the previous two solutions. The built-in grid search and parameter sweep functions for libraries like <code>scikit-learn</code> have options to run in parallel. Tools like GNU Parallel and computing clusters can easily do this.</li>
</ul>
</li>
</ul>
<h2>Two warnings</h2>
<ol>
<li>Parallelism can only do so much, and it has diminishing returns. If your code is going to take 400 years to finish on one processor<sup id=sf-intro-parallelism-4-back><a href=#sf-intro-parallelism-4 class=simple-footnote title="This happened to me last month.">4</a></sup>, using two processors in parallel, at best, would finish in 200 years. Even if you had 800 processors to split the work among, it would still take at least 6 months to finish. In these cases, you're better off trying to come up with a more efficient strategy for solving the problem.<sup id=sf-intro-parallelism-5-back><a href=#sf-intro-parallelism-5 class=simple-footnote title="A series of posts for another day.">5</a></sup></li>
<li>Don't use parallelism to circumvent rate limits. If you are getting data from an API or web scraping, the people providing that data have created "rate limits" that cap how fast you can get data from them. The ethical thing is (almost always) to respect those limits, so you don't overwhelm their system. If you go too fast, they'll either ban you or crash. Either way, your access is cut off. <ul>
<li>In some rare cases, the rate limit is very high (e.g. 1,000 queries per second), and the only way to reach it is with parallelism. </li>
</ul>
</li>
</ol>
<p>Cheers, Y'all. </p>
<h3>Notes</h3><ol class=simple-footnotes><li id=sf-intro-parallelism-1>Processors, cores, and logical-cores are all different things, but the distinctions are not important to this introduction. <a href=#sf-intro-parallelism-1-back class=simple-footnote-back>↩</a></li><li id=sf-intro-parallelism-2>Well, not quite, but that's for later. <a href=#sf-intro-parallelism-2-back class=simple-footnote-back>↩</a></li><li id=sf-intro-parallelism-3>Compression is often limited by disk speed instead of processor speed, but this is an simple example. <a href=#sf-intro-parallelism-3-back class=simple-footnote-back>↩</a></li><li id=sf-intro-parallelism-4>This happened to me last month. <a href=#sf-intro-parallelism-4-back class=simple-footnote-back>↩</a></li><li id=sf-intro-parallelism-5>A series of posts for another day. <a href=#sf-intro-parallelism-5-back class=simple-footnote-back>↩</a></li></ol>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="/tag/css.html">CSS</a>
      <a href="/tag/advice.html">advice</a>
      <a href="/tag/parallelism.html">parallelism</a>
    </p>
  </div>





</article>

    <footer>
<p>&copy;  </p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Jeff Lockhart's Site ",
  "url" : "",
  "image": "/images/face.jpg",
  "description": ""
}
</script>

</body>
</html>